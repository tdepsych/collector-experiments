<!--
---development---
[
{'task_title':'Religiosity & Control'}
]
---development---
-->
<!-- it can help to add a description between the --'s of what this code does -->
<link rel="stylesheet" href="../../collector-experiments/User/Assets/Global/css/global_css.css">
<link rel="stylesheet" href="../../collector-experiments/User/Assets/Global/css/radio_buttons.css">
<style>
  #container {
    margin-top:5%;
  }
  #container p {
    text-align: center;
    width: 92%!important;
  }
  #proceed_button{
    margin-bottom: 50px!important;
    transform: translateX(-15px)!important;
  }
  input {
    margin-right: 50px!important;
    margin-bottom: 40px;
    transform: scale(1.25)!important;
  }
  #checkboxes {
    margin: 0 auto;
    width: 645px;
    transform: translate(10px, 10px);
  }
  hr {
    transform: translateY(-10px);
  }
  #endRadio:after {
    display: none;
  }
  #uppercase {
    font-weight: bold;
  }
  .option-input:after {
    display: block;
    content: " ";
    position: absolute!important;
    bottom: 8px;
    background: rgb(63, 151, 246);
    height: 1px;
    width: 30px;
    right: -30px;
  }
  .radio:hover {
    background-color: #a7d4ef!important;
    cursor: pointer;
  }
  .radio:focus, .jcat:focus {
    background-color: #a7d4ef!important;
    color: #FFF;
  }
  .option-input:checked::after {
  -webkit-animation: none!important;
  -moz-animation: none!important;
  animation: none!important;
  content: '';
  z-index: 100;
  }
  .response1 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/one.svg)!important;
  }
    .response1:hover {
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/one.svg)!important;
    }
      .response1:checked {
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/one.svg)!important;
      }
  .response2 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/two.svg)!important;
  }
    .response2:hover {
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/two.svg)!important;
    }
      .response2:checked {
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/two.svg)!important;
      }
  .response3 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/three.svg)!important;
  }
    .response3:hover {
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/three.svg)!important;
    }
      .response3:checked {
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/three.svg)!important;
      }
  .response4 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/four.svg)!important;
  }
    .response4:hover {
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/four.svg)!important;
    }
      .response4:checked {
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/four.svg)!important;
      }
  .response5 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/five.svg)!important;
  }
    .response5:hover {
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/five.svg)!important;
    }
      .response5:checked {
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/five.svg)!important;
      }
  .response6 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/six.svg)!important;
  }
    .response6:hover {
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/six.svg)!important;
    }
      .response6:checked {
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/six.svg)!important;
      }
  .response7 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/seven.svg)!important;
  }
    .response7:hover {
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/seven.svg)!important;
    }
      .response7:checked {
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/seven.svg)!important;
      }
  .response8 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/eight.svg)!important;
  }
    .response8:hover {
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/eight.svg)!important;
    }
      .response8:checked {
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/eight.svg)!important;
      }
  .response9 {
    background: #FFF!important;
    background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/nine.svg)!important;
  }
    .response9:hover{
      background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/nine.svg)!important;
    }
      .response9:checked{
        background: #3f97f6!important;
        background-image: url(../../collector-experiments/User/Assets/Global/img/radio_numbers/checked/nine.svg)!important;
      }
  
  /* Restyle all the radio buttons to make the numbers appear a good size */
    .option-input {
      background-size: 10px!important;
      background-repeat: no-repeat!important;
      background-position: center!important;
      transform: scale(1.5)!important;
    }
    .option-input:checked,  .option-input:hover {
      background-size: 10px!important;
      background-repeat: no-repeat!important;
      background-position: center!important;
    }
  /*.warning {*/
  /*  color: red;*/
  /*}*/
  section{
    display: table;
    width: 590px;
    transform: translateY(-20px);
  }
  section > * {
    display: table-row;
  }
  .leftAlign2 {
    text-align: left;
    font-size: 13.5px;
    display: table-cell;
    width:292px;
  }
  .rightAlign2 {
    text-align: right;
    font-size: 13.5px;
    display: table-cell;
    width:292px;
    padding-right: 8px;
  }
  #jcontrol_noswear {
    margin-right: 3px!important;
    transform: translateY(2px) scale(1.25)!important;
  }
  #jcontrol_noswear_label{
    transform: translateX(-28px)!important;
  }
</style>
<button id="zoomOut" tabindex="-1"></button>
<button id="zoomIn" tabindex="-1"></button>
<div id="container">
  <h2><span id="uppercase">{{task_title}}</span></h2>
  <br><p>{{task_body_text}}</p><br>
  <!--<form>-->
  <div id="items">
    <div class="word_item">
      <p id="q1Label"><b>Control:</b> Imagine you are in a situation where you experience pain/frustration and swear out loud, to what degree do you feel in control of yourself? Give a 1–9 rating:</p>
      
      <div id="checkboxes">
        <input type="radio" name="jcontrol" class="option-input response1 radio jcontrol" value="1">
        <input type="radio" name="jcontrol" class="option-input response2 radio jcontrol" value="2">
        <input type="radio" name="jcontrol" class="option-input response3 radio jcontrol" value="3">
        <input type="radio" name="jcontrol" class="option-input response4 radio jcontrol" value="4">
        <input type="radio" name="jcontrol" class="option-input response5 radio jcontrol" value="5">
        <input type="radio" name="jcontrol" class="option-input response6 radio jcontrol" value="6">
        <input type="radio" name="jcontrol" class="option-input response7 radio jcontrol" value="7">
        <input type="radio" name="jcontrol" class="option-input response8 radio jcontrol" value="8">
        <input type="radio" name="jcontrol" class="option-input response9 radio jcontrol" id="endRadio" value="9">
        <input type="hidden" id="jcontrol_response" name="jcontrol" class="responseValues" value="0"/>
        <br>
        <section id="anchorTable" class="jcontrol">
          <div class="minor">
            <div class="leftAlign2">Very out of control</div>
            <div class="rightAlign2">Very in control</div>
          </div>
        </section>
        <label id="jcontrol_noswear_label" for="jcontrol_noswear">(If you do not swear out loud in response to pain/frustration, please tick this box: <input type="checkbox" id="jcontrol_noswear" name="jcontrol_noswear" value="0">)</label>
      </div>
      <hr>
    </div>
    </div>
    <div class="word_item">
      <p id="q2Label"><b>Religiosity:</b> How religious do you consider yourself to be? Give a 1–9 rating:</p>
      <div id="checkboxes">
        <input type="radio" name="jreligion" class="option-input response1 radio jreligion" value="1">
        <input type="radio" name="jreligion" class="option-input response2 radio jreligion" value="2">
        <input type="radio" name="jreligion" class="option-input response3 radio jreligion" value="3">
        <input type="radio" name="jreligion" class="option-input response4 radio jreligion" value="4">
        <input type="radio" name="jreligion" class="option-input response5 radio jreligion" value="5">
        <input type="radio" name="jreligion" class="option-input response6 radio jreligion" value="6">
        <input type="radio" name="jreligion" class="option-input response7 radio jreligion" value="7">
        <input type="radio" name="jreligion" class="option-input response8 radio jreligion" value="8">
        <input type="radio" name="jreligion" class="option-input response9 radio jreligion" id="endRadio" value="9">
        <input type="hidden" id="jreligion_response" name="jreligion" class="responseValues" value="0"/>
        <br>
        <section id="anchorTable">
          <div class="minor">
            <div class="leftAlign2">I am not religious</div>
            <div class="rightAlign2">I am devoutly religious</div>
          </div>
        </section>
      </div>
      <hr>
    </div>
    </div>
  </div>
  <!--</form>-->
  <button class="btn btn-primary" id="proceed_button">Proceed</button>
<script>

  function appropriate_message(this_message) {
    bootbox.alert(this_message);
  }
  
  var score1 = null;
  var score2 = null;
  var score2 = null;
  
  $('#container').on('change', function() {
    // This stores all the response values back into their inputs so Collector adds them to the data
    $('#jreligion_response').val($('.jreligion:checked').val());

    // This assigns the response values to variables so we can validate the form by checking if they are "null"
    score2 = $('.jreligion:checked').val();
    
    // hide control scale if no-swear ticked
    if ($('#jcontrol_noswear').is(":checked")) {
      score1 = 0;
      $('#jcontrol_response').val(0);
      $('.jcontrol').hide();
    } else {
      score1 = $('.jcontrol:checked').val();
      $('#jcontrol_response').val($('.jcontrol:checked').val());
      $('.jcontrol').show();
    }
  });

  // -------------- //
  // SUBMIT ACTIONS //
  // -------------- //
  
  $('#proceed_button').click(function() {
    
    // First we validate the form by checking we have complete responses. If there are null values, we alert the user and change the relevant text red. Else, we move to the next word
    if (score1 == null || score2 == null) {
      appropriate_message("<b>Missing responses</b><br>Sorry, you have missed one or more questions, these are now highlighted in red. Please fill in all the questions");
        if (score1 == null) { $('#q1Label').css('color','red');} else {$('#q1Label').css('color','green');}
        if (score2 == null) { $('#q2Label').css('color','red');} else {$('#q2Label').css('color','green');}
    } else {
      Phase.submit(); 
    }
  });
  
  // ------------------ //
  // SHUFFLE ITEM ORDER //
  // ------------------ //
  
  // Function to extract the required DIVs, make them into an array, shuffle that array (via the second function) and then insert the output into the HTML
  function shuffle() {
    var container = document.getElementById("items");
    var elementsArray = Array.prototype.slice.call(container.getElementsByClassName('word_item'));
  	elementsArray.forEach(function(element){
    	container.removeChild(element);
    });
    shuffleArray(elementsArray);
    elementsArray.forEach(function(element){
      container.appendChild(element);
    });
  }

  // Function to shuffle the array created in shuffle() - you can ignore
  function shuffleArray(array) {
      for (var i = array.length - 1; i > 0; i--) {
          var j = Math.floor(Math.random() * (i + 1));
          var temp = array[i];
          array[i] = array[j];
          array[j] = temp;
      }
      return array;
  };

  // Call to run the shuffle() function as soon as the page loads.
  document.addEventListener("DOMContentLoaded", function() {
    shuffle();
    // shuffle_category();
  });

</script>
<script src="../../collector-experiments/User/Assets/Global/js/zoom_script.js"></script>